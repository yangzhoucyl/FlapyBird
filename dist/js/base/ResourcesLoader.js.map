{"version":3,"sources":["../../../js/base/ResourcesLoader.js"],"names":["ResourcesLoader","map","Map","Resources","key","value","image","Image","src","set","callback","loadedCount","values","onload","size"],"mappings":";;;;;;;;;qjBAAA;;;AACA;;;;IAEaA,e,WAAAA,e;AACT,+BAAa;AAAA;;AACT,aAAKC,GAAL,GAAW,IAAIC,GAAJ,CAAQC,oBAAR,CAAX;AADS;AAAA;AAAA;;AAAA;AAET,iCAAwB,KAAKF,GAA7B,8HAAiC;AAAA;;AAAA;;AAAA,oBAAxBG,GAAwB;AAAA,oBAAnBC,KAAmB;;AAC7B,oBAAMC,QAAQ,IAAIC,KAAJ,EAAd;AACAD,sBAAME,GAAN,GAAYH,KAAZ;AACA,qBAAKJ,GAAL,CAASQ,GAAT,CAAaL,GAAb,EAAkBE,KAAlB;AACH;AANQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOZ;;;;+BACMI,Q,EAAS;AAAA;;AACZ,gBAAIC,cAAc,CAAlB;AADY;AAAA;AAAA;;AAAA;AAEZ,sCAAkB,KAAKV,GAAL,CAASW,MAAT,EAAlB,mIAAoC;AAAA,wBAA3BP,KAA2B;;AAChCA,0BAAMQ,MAAN,GAAe,YAAM;AACjBF;AACA,4BAAGA,eAAe,MAAKV,GAAL,CAASa,IAA3B,EAAgC;AAC5BJ,qCAAS,MAAKT,GAAd;AACH;AACJ,qBALD;AAMH;AATW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUf;;;iCAEc;AACX,mBAAO,IAAID,eAAJ,EAAP;AACH","file":"ResourcesLoader.js","sourcesContent":["//资源文件加载器，确保canvas在图片资源加载完成后进行渲染\r\nimport {Resources} from \"./Resources.js\";\r\n\r\nexport class ResourcesLoader {\r\n    constructor(){\r\n        this.map = new Map(Resources);\r\n        for(let [key, value] of this.map){\r\n            const image = new Image();\r\n            image.src = value;\r\n            this.map.set(key, image);\r\n        }\r\n    }\r\n    onLoad(callback){\r\n        let loadedCount = 0;\r\n        for (let value of this.map.values()){\r\n            value.onload = () => {\r\n                loadedCount++;\r\n                if(loadedCount >= this.map.size){\r\n                    callback(this.map);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    static create(){\r\n        return new ResourcesLoader();\r\n    }\r\n}"]}